<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta charset="utf-8"/>
        <title>task3</title>
        <link rel="stylesheet" type="text/css" href="task3.css"/>
    </head>
    <body>
        <div class="side1">
            <div class="side" style="display:none;">
                <div class="mobile-menu"><button onclick="quitpop()"><img src="cross.png" width=40px; height=40px;></button></div>
                <div class="item1">Item 1</div>
                <br/>
                <div class="item1">Item 2</div>
                <br/>
                <div class="item1">Item 3</div>
                <br/>
                <div class="item1">Item 4</div>
            </div>
        </div>
        <div class="desktop">
            <div class="frame">
                <div class="leftwebhead">My Website</div>
                <div class="web-menu">
                        <div class="item">Item 1</div>
                        <div class="item">Item 2</div>
                        <div class="item">Item 3</div>
                        <div class="item">Item 4</div>
                </div>
                <div class="mobile-menu"><button onclick="popup()"><img src="menu.png" width=40px; height=40px;></button></div>
            </div>
            <div class="welcome">
                <div class="text">Welcome to my home</div>
            </div>
            
            <div class="list-2">
                <div class="promotion">
                     
                </div>

                <div class="promotion">
                    
                </div>

                <div class="promotion">
                    
                </div>
            </div>
            <div class="list-1">
                <div class="promotion1">
                       
                </div>

                <div class="promotion1">
                    
                </div>

                <div class="promotion1">
                    
                </div>
            </div>
            <div class="list">
                <div class="title1">
                    <img src="star.png" width=40px; height=40px/>
                    <div class="background1"></div>
                </div>
                <div class="list11">
                    <div class="title1">
                        <img src="star.png" width=40px; height=40px;/>
                        <div class="background1"></div>
                    </div>
                    <div class="title1">
                        <img src="star.png" width=40px; height=40px;/>
                        <div class="background1"></div>
                    </div>
                </div>
                <div class="list11">
                    <div class="title1">
                        <img src="star.png" width=40px; height=40px;/>
                        <div class="background1"></div>
                    </div>
                    <div class="title1">
                        <img src="star.png" width=40px; height=40px;/>
                        <div class="background1"></div>
                    </div>
                </div>
                
                <div class="title1">
                    <div><img src="star.png" width=40px; height=40px;/></div>
                    <div class="background1"></div>
                </div>
                <div class="list11">
                    <div class="title1">
                        <img src="star.png" width=40px; height=40px;/>
                        <div class="background1"></div>
                    </div>
                    <div class="title1">
                        <img src="star.png" width=40px; height=40px;/>
                        <div class="background1"></div>
                    </div>
                </div>
                <div class="list11">
                    <div class="title1">
                        <img src="star.png" width=40px; height=40px;/>
                        <div class="background1"></div>
                    </div>
                    <div class="title1">
                        <img src="star.png" width=40px; height=40px;/>
                        <div class="background1"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="list12">
            <div class="title2">
                <div><img src="star.png" width=40px; height=40px/></div>
                <div class="background2"></div>
            </div>
            <div class="title2">
                <div class="icon2"><img src="star.png" width=40px; height=40px;/></div>
                <div class="background2"></div>
            </div>
            <div class="title2">
                <div class="icon2"><img src="star.png" width=40px; height=40px;/></div>
                <div class="background2"></div>
            </div>
            <div class="title2">
                <div class="icon2"><img src="star.png" width=40px; height=40px;/></div>
                <div class="background2"></div>
            </div>
        </div>
        <div class="list12">
            <div class="title2">
                <div class="icon2"><img src="star.png" width=40px; height=40px;/></div>
                <div class="background2"></div>
            </div>
            <div class="title2">
                <div><img src="star.png" width=40px; height=40px;/></div>
                <div class="background2"></div>
            </div>
            <div class="title2">
                <div class="icon2"><img src="star.png" width=40px; height=40px;/></div>
                <div class="background2"></div>
            </div>
            <div class="title2">
                <div class="icon2"><img src="star.png" width=40px; height=40px;/></div>
                <div class="background2"></div>
            </div>
        </div>
        <div class="list13">
            <div class="title2">
                <div class="icon2"><img src="star.png" width=40px; height=40px;/></div>
                <div class="background2"></div>
            </div>
            <div class="title2">
                <div class="icon2"><img src="star.png" width=40px; height=40px;/></div>
                <div class="background2"></div>
        </div>
        </div>
        </div>
    <script>
        function popup(){
            let n=document.querySelector(".side");
            n.style.display="block";     
        }
        function quitpop(){
            let n=document.querySelector(".side");
            n.style.display="none";
        }
        fetch("https://padax.github.io/taipei-day-trip-resources/taipei-attractions-assignment-1").then(function(response){
                return response.json();
                }).then(function(data){
                    let test=data.data.results
                        for (let i=4;i<14;i++){
                            let pro=test[i]; 
                            let title1=pro.stitle;
                            let address=pro.filelist;
                            let img1=address.match(/.*?(?=jpg)/i)+"jpg";
                            let promotionelements=document.querySelectorAll('.background1');
                                for (let j=0;j<promotionelements.length; j++){
                                    let promotionelement=promotionelements[j];
                                    let existingp=promotionelement.querySelector('p');
                                    if (!existingp){
                                        let newp=document.createElement('p');
                                        newp.textContent=title1;
                                        promotionelement.appendChild(newp);
                                        break;
                                    }
                                }
                                }
                        for (let i=4;i<14;i++){
                            let pro=test[i]; 
                            let title1=pro.stitle;
                            let address=pro.filelist;
                            let img1=address.match(/.*?(?=jpg)/i)+"jpg";
                            let promotionelements=document.querySelectorAll('.title2');
                            for (let j = 0; j < promotionelements.length; j++) {
                                let promotionelement = promotionelements[j];
                                if (!promotionelement.style.backgroundImage) {
                                    promotionelement.style.backgroundImage = `url('${img1}')`;
                                    break;
                                }
                            }
                            }
                        for (let i=4;i<14;i++){
                            let pro=test[i]; 
                            let title1=pro.stitle;
                            let address=pro.filelist;
                            let img1=address.match(/.*?(?=jpg)/i)+"jpg";
                            let promotionelements=document.querySelectorAll('.title1');
                            for (let j = 0; j < promotionelements.length; j++) {
                                let promotionelement = promotionelements[j];
                                if (!promotionelement.style.backgroundImage) {
                                    promotionelement.style.backgroundImage = `url('${img1}')`;
                                    break;
                                }
                                                    }
                            }
                        for (let i=4;i<14;i++){
                            let pro=test[i]; 
                            let title1=pro.stitle;
                            let promotionelements=document.querySelectorAll('.background2');
                                for (let j=0;j<promotionelements.length; j++){
                                    let promotionelement=promotionelements[j];
                                    let existingp=promotionelement.querySelector('p');
                                    if (!existingp){
                                        let newp=document.createElement('p');
                                        newp.textContent=title1;
                                        promotionelement.appendChild(newp);
                                        break;
                                    }
                                }
                                }
                        for (let i=0;i<3;i++) {
                            let pro=test[i]; 
                            let address=pro.filelist;
                            let img1=address.match(/.*?(?=jpg)/i)+"jpg";
                            let title1=pro.stitle;
                            let promotionelements=document.querySelectorAll('.promotion');
                                for (let j=0;j<promotionelements.length; j++){
                                    let promotionelement=promotionelements[j];
                                    let existingImg=promotionelement.querySelector('img');
                                    let existingp=promotionelement.querySelector('p');
                                    if (!existingImg && !existingp){
                                        let newImg=document.createElement('img');
                                        newImg.src=img1;
                                        promotionelement.appendChild(newImg);
                                        let newp=document.createElement('p');
                                        newp.textContent=title1;
                                        promotionelement.appendChild(newp);
                                        break;
                                    }
                                }
                    let promotionelements1=document.querySelectorAll('.promotion1');
                        for (let j=0;j<promotionelements1.length; j++){
                            let promotionelement=promotionelements1[j];
                            let existingImg=promotionelement.querySelector('img');
                            let existingp=promotionelement.querySelector('p');
                            if (!existingImg && !existingp){
                                let newImg=document.createElement('img');
                                newImg.src=img1;
                                promotionelement.appendChild(newImg);
                                let newp=document.createElement('p');
                                newp.textContent=title1;
                                promotionelement.appendChild(newp);
                                break;
                            }
                        }
                    }
                    
                })
    </script>
    </body>
</html>